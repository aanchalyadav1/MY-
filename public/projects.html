<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Projects â€” Aanchal</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav class="top-right-menu"><a href="index.html" class="trm-item">Home</a><a href="admin.html" class="trm-item">Admin</a></nav>
  <main class="container">
    <h1>Projects</h1>
    <div id="projects" class="list"></div>
  </main>
  <div id="toasts" class="toasts"></div>

  <script src="firebase.js" defer></script>
  <script src="global.js" defer></script>
  <script>
    (function(){
      const db = window.db;
      const wrap = document.getElementById('projects');
      if(!db){ wrap.innerHTML = '<p style="opacity:.8">Firebase not loaded</p>'; return; }
      showSkeleton && showSkeleton('#projects', 3);
      db.collection('projects').doc('list').get().then(doc=>{
        const items = doc.exists && Array.isArray(doc.data().items) ? doc.data().items : [];
        wrap.innerHTML = items.length ? '' : '<p style="opacity:.8">No projects</p>';
        items.forEach(it=>{
          const row=document.createElement('div'); row.className='list-row';
          row.innerHTML = `<div style="display:flex;gap:10px;align-items:center">${it.image?`<img src="${it.image}" class="preview-img">`:''}<div><strong>${it.name}</strong><div style="color:var(--muted)">${it.desc||''}</div></div></div>`;
          wrap.appendChild(row);
        });
      }).catch(e=>{ console.error(e); wrap.innerHTML='<p style="opacity:.8">Error</p>'; });
    })();
  </script>
</body>
</html>
