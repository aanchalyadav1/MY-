<!doctype html>
<html>
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Certificates — Aanchal</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js" defer></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js" defer></script>
</head>
<body>
  <canvas id="starsCanvas" class="stars-canvas"></canvas>
  <nav class="top-right-menu"><a href="index.html" class="trm-item">Home</a><a href="admin.html" class="trm-item admin-link">Admin</a></nav>
  <main class="container" style="padding-top:48px">
    <h1>Certificates</h1>
    <div id="certList">Loading…</div>
  </main>
  <footer class="site-foot">© 2025 Aanchal Yadav</footer>

  <script src="stars.js" defer></script>
  <script src="../scripts/firebase.js" defer></script>
  <script>
    const db = window.db || firebase.firestore();
    function escapeHtml(s){ return s ? s.replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) : ''; }
    async function load(){
      const out = document.getElementById('certList');
      try{
        const doc = await db.collection('certificates').doc('list').get();
        const items = doc.exists && Array.isArray(doc.data().items) ? doc.data().items : [];
        out.innerHTML = items.length ? '' : '<p style="opacity:.7">No certificates</p>';
        items.forEach(c=>{
          const d = document.createElement('div'); d.className='cardItem';
          d.innerHTML = `<strong>${escapeHtml(c.title)}</strong><div style="color:var(--muted)">${escapeHtml(c.issuer||'')}</div>`;
          if(c.fileUrl){ const a=document.createElement('a'); a.href=c.fileUrl; a.target='_blank'; a.textContent='View'; d.appendChild(a); }
          out.appendChild(d);
        });
      }catch(e){ console.error(e); out.innerHTML='<p>Error</p>'; }
    }
    document.addEventListener('DOMContentLoaded', load);
  </script>
</body>
</html>
